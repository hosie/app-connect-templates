$integration: 'http://ibm.com/appconnect/integration/v2/integrationFile'
integration:
  type: trigger-action
  trigger-interfaces:
    trigger-interface-1:
      type: event-trigger
      triggers:
        CREATED:
          input-context:
            data: Tasks
          assembly:
            $ref: '#/integration/assemblies/assembly-1'
          options:
            workspace-id: '421739420611048'
            project: '424817963840523'
            parentFilter:
              workspace-id: '421739420611048'
              project: '424817963840523'
      connector-type: asana
  action-interfaces:
    action-interface-1:
      type: api-action
      business-object: products
      connector-type: netsuiteerp
      actions:
        CREATE: {}
    action-interface-2:
      type: api-action
      business-object: products
      connector-type: stripe
      actions:
        CREATE: {}
    action-interface-3:
      type: api-action
      business-object: campaigns
      connector-type: salesforcepardot
      actions:
        CREATE: {}
  assemblies:
    assembly-1:
      assembly:
        execute:
          - create-action:
              name: NetSuite ERP Create product
              target:
                $ref: '#/integration/action-interfaces/action-interface-1'
              map:
                mappings:
                  - itemId:
                      template: '{{$Trigger.id}}'
                  - parent:
                      mappings:
                        - name:
                            template: '{{$Trigger.name}}'
                $map: 'http://ibm.com/appconnect/map/v1'
                input:
                  - variable: Trigger
                    $ref: '#/trigger/payload'
          - create-action:
              name: Stripe Create product
              target:
                $ref: '#/integration/action-interfaces/action-interface-2'
              map:
                mappings:
                  - name:
                      template: '{{$Trigger.name}}'
                $map: 'http://ibm.com/appconnect/map/v1'
                input:
                  - variable: Trigger
                    $ref: '#/trigger/payload'
                  - variable: NetSuiteERPCreateproduct
                    $ref: '#/node-output/NetSuite ERP Create product/response/payload'
          - create-action:
              name: Salesforce Pardot Create campaign
              target:
                $ref: '#/integration/action-interfaces/action-interface-3'
              map:
                mappings:
                  - name:
                      template: '{{$Trigger.name}}'
                $map: 'http://ibm.com/appconnect/map/v1'
                input:
                  - variable: Trigger
                    $ref: '#/trigger/payload'
                  - variable: NetSuiteERPCreateproduct
                    $ref: '#/node-output/NetSuite ERP Create product/response/payload'
                  - variable: StripeCreateproduct
                    $ref: '#/node-output/Stripe Create product/response/payload'
  name: >-
    Create NetSuite ERP and Stripe products from Asana tasks to launch a
    Salesforce Pardot campaign
  description: >-
    When a new task is created in Asana, a new product is created in NetSuite
    ERP & Stripe, then a campaign for the new product is launched as a
    Salesforce Pardot Campaign.
  todo: >
    To refer to these instructions while editing the flow, open [the github
    page](https://github.com/ot4i/app-connect-templates/blob/master/resources/markdown/Create%20NetSuite%20ERP%20and%20Stripe%20products%20from%20Asana%20tasks%20to%20launch%20a%20Salesforce%20Pardot%20campaign_instructions.md)
    (opens in a new window).


    1. Click **Create flow** to start using the template.

    1. Connect to your [Asana
    account](https://developer.ibm.com/integration/docs/app-connect/how-to-guides-for-apps/use-ibm-app-connect-asana/).

    1. Select your Asana team and project.

    1. Connect to your Netsuite ERP account.

    1. Connect to your Stripe account.

    1. Connect to your Salesforce Pardot account.

    1. To start the flow, in the banner open the options menu [&#8942;] then
    click **Start flow**.
models: {}
